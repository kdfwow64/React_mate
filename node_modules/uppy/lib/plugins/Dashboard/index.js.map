{"version":3,"sources":["../../../src/plugins/Dashboard/index.js"],"names":["Plugin","require","Translator","dragDrop","Dashboard","StatusBar","Informer","findAllDOMElements","prettyBytes","defaultTabIcon","FOCUSABLE_ELEMENTS","module","exports","core","opts","id","title","type","defaultLocale","strings","selectToUpload","closeModal","upload","importFrom","dashboardWindowTitle","dashboardTitle","copyLinkToClipboardSuccess","copyLinkToClipboardFallback","fileSource","done","localDisk","myDevice","dropPasteImport","dropPaste","browse","fileProgress","numberOfSelectedFiles","uploadAllNewFiles","emptyFolderAdded","folderAdded","defaultOptions","target","getMetaFromForm","trigger","inline","width","height","semiTransparent","showProgressDetails","hideUploadButton","note","closeModalOnClickOutside","locale","onRequestCloseModal","translator","i18n","translate","bind","requestCloseModal","openModal","isModalOpen","addTarget","actions","hideAllPanels","showPanel","getFocusableNodes","setFocusToFirstNode","maintainFocus","initEvents","onKeydown","handleClickOutside","handleFileCard","handleDrop","pauseAll","resumeAll","cancelAll","updateDashboardElWidth","render","install","plugin","callerPluginId","constructor","name","callerPluginName","callerPluginType","msg","log","isHidden","state","getPluginState","newTargets","targets","slice","push","setPluginState","el","activePanel","filter","nodes","querySelectorAll","Object","keys","map","key","focusableNodes","length","focus","event","focusedItemIndex","indexOf","document","activeElement","shiftKey","preventDefault","savedDocumentScrollPosition","window","scrollY","body","classList","add","style","top","setTimeout","remove","scrollTo","keyCode","showModalTrigger","forEach","addEventListener","removeDragDropListener","files","removeEvents","removeEventListener","on","removeActions","off","dashboardEl","querySelector","offsetWidth","containerWidth","fileId","fileCardFor","file","addFile","source","data","emit","pluginState","newFiles","progress","uploadStarted","inProgressFiles","uploadComplete","isPaused","inProgressFilesArray","totalSize","totalUploadedSize","bytesTotal","bytesUploaded","attachRenderFunctionToTarget","getPlugin","icon","isSupported","acquirers","progressindicators","startUpload","ev","catch","err","stack","message","cancelUpload","fileID","showFileCard","fileCardDone","meta","modal","totalFileCount","totalProgress","autoProceed","removeFile","info","metaFields","resumableUploads","capabilities","pauseUpload","pauseResume","retryUpload","maxWidth","maxHeight","currentWidth","isWide","discoverProviderPlugins","iteratePlugins","mount","plugins","pluginID","disableStatusBar","use","disableInformer","uninstall","informer","removePlugin","statusBar","unmount"],"mappings":"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","file":"index.js","sourcesContent":["const Plugin = require('../Plugin')\nconst Translator = require('../../core/Translator')\nconst dragDrop = require('drag-drop')\nconst Dashboard = require('./Dashboard')\nconst StatusBar = require('../StatusBar')\nconst Informer = require('../Informer')\nconst { findAllDOMElements } = require('../../core/Utils')\nconst prettyBytes = require('prettier-bytes')\nconst { defaultTabIcon } = require('./icons')\n\nconst FOCUSABLE_ELEMENTS = [\n  'a[href]',\n  'area[href]',\n  'input:not([disabled]):not([type=\"hidden\"])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  'button:not([disabled])',\n  'iframe',\n  'object',\n  'embed',\n  '[contenteditable]',\n  '[tabindex]:not([tabindex^=\"-\"])'\n]\n\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nmodule.exports = class DashboardUI extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.id = this.opts.id || 'Dashboard'\n    this.title = 'Dashboard'\n    this.type = 'orchestrator'\n\n    const defaultLocale = {\n      strings: {\n        selectToUpload: 'Select files to upload',\n        closeModal: 'Close Modal',\n        upload: 'Upload',\n        importFrom: 'Import files from',\n        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',\n        dashboardTitle: 'Uppy Dashboard',\n        copyLinkToClipboardSuccess: 'Link copied to clipboard.',\n        copyLinkToClipboardFallback: 'Copy the URL below',\n        fileSource: 'File source',\n        done: 'Done',\n        localDisk: 'Local Disk',\n        myDevice: 'My Device',\n        dropPasteImport: 'Drop files here, paste, import from one of the locations above or',\n        dropPaste: 'Drop files here, paste or',\n        browse: 'browse',\n        fileProgress: 'File progress: upload speed and ETA',\n        numberOfSelectedFiles: 'Number of selected files',\n        uploadAllNewFiles: 'Upload all new files',\n        emptyFolderAdded: 'No files were added from empty folder',\n        folderAdded: {\n          0: 'Added %{smart_count} file from %{folder}',\n          1: 'Added %{smart_count} files from %{folder}'\n        }\n      }\n    }\n\n    // set default options\n    const defaultOptions = {\n      target: 'body',\n      getMetaFromForm: true,\n      trigger: '#uppy-select-files',\n      inline: false,\n      width: 750,\n      height: 550,\n      semiTransparent: false,\n      defaultTabIcon: defaultTabIcon(),\n      showProgressDetails: false,\n      hideUploadButton: false,\n      note: null,\n      closeModalOnClickOutside: false,\n      locale: defaultLocale,\n      onRequestCloseModal: () => this.closeModal()\n    }\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.locale = Object.assign({}, defaultLocale, this.opts.locale)\n    this.locale.strings = Object.assign({}, defaultLocale.strings, this.opts.locale.strings)\n\n    this.translator = new Translator({locale: this.locale})\n    this.i18n = this.translator.translate.bind(this.translator)\n\n    this.closeModal = this.closeModal.bind(this)\n    this.requestCloseModal = this.requestCloseModal.bind(this)\n    this.openModal = this.openModal.bind(this)\n    this.isModalOpen = this.isModalOpen.bind(this)\n\n    this.addTarget = this.addTarget.bind(this)\n    this.actions = this.actions.bind(this)\n    this.hideAllPanels = this.hideAllPanels.bind(this)\n    this.showPanel = this.showPanel.bind(this)\n    this.getFocusableNodes = this.getFocusableNodes.bind(this)\n    this.setFocusToFirstNode = this.setFocusToFirstNode.bind(this)\n    this.maintainFocus = this.maintainFocus.bind(this)\n\n    this.initEvents = this.initEvents.bind(this)\n    this.onKeydown = this.onKeydown.bind(this)\n    this.handleClickOutside = this.handleClickOutside.bind(this)\n    this.handleFileCard = this.handleFileCard.bind(this)\n    this.handleDrop = this.handleDrop.bind(this)\n    this.pauseAll = this.pauseAll.bind(this)\n    this.resumeAll = this.resumeAll.bind(this)\n    this.cancelAll = this.cancelAll.bind(this)\n    this.updateDashboardElWidth = this.updateDashboardElWidth.bind(this)\n    this.render = this.render.bind(this)\n    this.install = this.install.bind(this)\n  }\n\n  addTarget (plugin) {\n    const callerPluginId = plugin.id || plugin.constructor.name\n    const callerPluginName = plugin.title || callerPluginId\n    const callerPluginType = plugin.type\n\n    if (callerPluginType !== 'acquirer' &&\n        callerPluginType !== 'progressindicator' &&\n        callerPluginType !== 'presenter') {\n      let msg = 'Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter'\n      this.core.log(msg)\n      return\n    }\n\n    const target = {\n      id: callerPluginId,\n      name: callerPluginName,\n      type: callerPluginType,\n      isHidden: true\n    }\n\n    const state = this.getPluginState()\n    const newTargets = state.targets.slice()\n    newTargets.push(target)\n\n    this.setPluginState({\n      targets: newTargets\n    })\n\n    return this.el\n  }\n\n  hideAllPanels () {\n    this.setPluginState({\n      activePanel: false\n    })\n  }\n\n  showPanel (id) {\n    const { targets } = this.getPluginState()\n\n    const activePanel = targets.filter((target) => {\n      return target.type === 'acquirer' && target.id === id\n    })[0]\n\n    this.setPluginState({\n      activePanel: activePanel\n    })\n  }\n\n  requestCloseModal () {\n    if (this.opts.onRequestCloseModal) {\n      return this.opts.onRequestCloseModal()\n    } else {\n      this.closeModal()\n    }\n  }\n\n  getFocusableNodes () {\n    const nodes = this.el.querySelectorAll(FOCUSABLE_ELEMENTS)\n    return Object.keys(nodes).map((key) => nodes[key])\n  }\n\n  setFocusToFirstNode () {\n    const focusableNodes = this.getFocusableNodes()\n    // console.log(focusableNodes)\n    // console.log(focusableNodes[0])\n    if (focusableNodes.length) focusableNodes[0].focus()\n  }\n\n  maintainFocus (event) {\n    var focusableNodes = this.getFocusableNodes()\n    var focusedItemIndex = focusableNodes.indexOf(document.activeElement)\n\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableNodes[focusableNodes.length - 1].focus()\n      event.preventDefault()\n    }\n\n    if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {\n      focusableNodes[0].focus()\n      event.preventDefault()\n    }\n  }\n\n  openModal () {\n    this.setPluginState({\n      isHidden: false\n    })\n\n    // save scroll position\n    this.savedDocumentScrollPosition = window.scrollY\n\n    // add class to body that sets position fixed, move everything back\n    // to scroll position\n    document.body.classList.add('is-UppyDashboard-open')\n    document.body.style.top = `-${this.savedDocumentScrollPosition}px`\n\n    // timeout is needed because yo-yo/morphdom/nanoraf; not needed without nanoraf\n    setTimeout(this.setFocusToFirstNode, 100)\n    setTimeout(this.updateDashboardElWidth, 100)\n  }\n\n  closeModal () {\n    this.setPluginState({\n      isHidden: true\n    })\n\n    document.body.classList.remove('is-UppyDashboard-open')\n\n    window.scrollTo(0, this.savedDocumentScrollPosition)\n  }\n\n  isModalOpen () {\n    return !this.getPluginState().isHidden || false\n  }\n\n  onKeydown (event) {\n    // close modal on esc key press\n    if (event.keyCode === 27) this.requestCloseModal(event)\n    // maintainFocus on tab key press\n    if (event.keyCode === 9) this.maintainFocus(event)\n  }\n\n  handleClickOutside () {\n    if (this.opts.closeModalOnClickOutside) this.requestCloseModal()\n  }\n\n  initEvents () {\n    // Modal open button\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach(trigger => trigger.addEventListener('click', this.openModal))\n    }\n\n    if (!this.opts.inline && !showModalTrigger) {\n      this.core.log('Dashboard modal trigger not found, you won’t be able to select files. Make sure `trigger` is set correctly in Dashboard options', 'error')\n    }\n\n    if (!this.opts.inline) {\n      document.addEventListener('keydown', this.onKeydown)\n    }\n\n    // Drag Drop\n    this.removeDragDropListener = dragDrop(this.el, (files) => {\n      this.handleDrop(files)\n    })\n  }\n\n  removeEvents () {\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach(trigger => trigger.removeEventListener('click', this.openModal))\n    }\n\n    this.removeDragDropListener()\n\n    if (!this.opts.inline) {\n      document.removeEventListener('keydown', this.onKeydown)\n    }\n  }\n\n  actions () {\n    this.core.on('dashboard:file-card', this.handleFileCard)\n\n    window.addEventListener('resize', this.updateDashboardElWidth)\n  }\n\n  removeActions () {\n    this.core.off('dashboard:file-card', this.handleFileCard)\n\n    window.removeEventListener('resize', this.updateDashboardElWidth)\n  }\n\n  updateDashboardElWidth () {\n    const dashboardEl = this.el.querySelector('.UppyDashboard-inner')\n    this.core.log(`Dashboard width: ${dashboardEl.offsetWidth}`)\n\n    this.setPluginState({\n      containerWidth: dashboardEl.offsetWidth\n    })\n  }\n\n  handleFileCard (fileId) {\n    this.setPluginState({\n      fileCardFor: fileId || false\n    })\n  }\n\n  handleDrop (files) {\n    this.core.log('[Dashboard] Files were dropped')\n\n    files.forEach((file) => {\n      this.core.addFile({\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n  }\n\n  cancelAll () {\n    this.core.emit('core:cancel-all')\n  }\n\n  pauseAll () {\n    this.core.emit('core:pause-all')\n  }\n\n  resumeAll () {\n    this.core.emit('core:resume-all')\n  }\n\n  render (state) {\n    const pluginState = this.getPluginState()\n    const files = state.files\n\n    const newFiles = Object.keys(files).filter((file) => {\n      return !files[file].progress.uploadStarted\n    })\n    const inProgressFiles = Object.keys(files).filter((file) => {\n      return !files[file].progress.uploadComplete &&\n             files[file].progress.uploadStarted &&\n             !files[file].isPaused\n    })\n\n    let inProgressFilesArray = []\n    inProgressFiles.forEach((file) => {\n      inProgressFilesArray.push(files[file])\n    })\n\n    let totalSize = 0\n    let totalUploadedSize = 0\n    inProgressFilesArray.forEach((file) => {\n      totalSize = totalSize + (file.progress.bytesTotal || 0)\n      totalUploadedSize = totalUploadedSize + (file.progress.bytesUploaded || 0)\n    })\n    totalSize = prettyBytes(totalSize)\n    totalUploadedSize = prettyBytes(totalUploadedSize)\n\n    const attachRenderFunctionToTarget = (target) => {\n      const plugin = this.core.getPlugin(target.id)\n      return Object.assign({}, target, {\n        icon: plugin.icon || this.opts.defaultTabIcon,\n        render: plugin.render\n      })\n    }\n\n    const isSupported = (target) => {\n      const plugin = this.core.getPlugin(target.id)\n      // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n      if (typeof plugin.isSupported !== 'function') {\n        return true\n      }\n      return plugin.isSupported()\n    }\n\n    const acquirers = pluginState.targets\n      .filter(target => target.type === 'acquirer' && isSupported(target))\n      .map(attachRenderFunctionToTarget)\n\n    const progressindicators = pluginState.targets\n      .filter(target => target.type === 'progressindicator')\n      .map(attachRenderFunctionToTarget)\n\n    const startUpload = (ev) => {\n      this.core.upload().catch((err) => {\n        // Log error.\n        this.core.log(err.stack || err.message || err)\n      })\n    }\n\n    const cancelUpload = (fileID) => {\n      this.core.emit('core:upload-cancel', fileID)\n      this.core.emit('core:file-remove', fileID)\n    }\n\n    const showFileCard = (fileID) => {\n      this.core.emit('dashboard:file-card', fileID)\n    }\n\n    const fileCardDone = (meta, fileID) => {\n      this.core.emit('core:update-meta', meta, fileID)\n      this.core.emit('dashboard:file-card')\n    }\n\n    return Dashboard({\n      state: state,\n      modal: pluginState,\n      newFiles: newFiles,\n      files: files,\n      totalFileCount: Object.keys(files).length,\n      totalProgress: state.totalProgress,\n      acquirers: acquirers,\n      activePanel: pluginState.activePanel,\n      getPlugin: this.core.getPlugin,\n      progressindicators: progressindicators,\n      autoProceed: this.core.opts.autoProceed,\n      hideUploadButton: this.opts.hideUploadButton,\n      id: this.id,\n      closeModal: this.requestCloseModal,\n      handleClickOutside: this.handleClickOutside,\n      showProgressDetails: this.opts.showProgressDetails,\n      inline: this.opts.inline,\n      semiTransparent: this.opts.semiTransparent,\n      showPanel: this.showPanel,\n      hideAllPanels: this.hideAllPanels,\n      log: this.core.log,\n      i18n: this.i18n,\n      pauseAll: this.pauseAll,\n      resumeAll: this.resumeAll,\n      addFile: this.core.addFile,\n      removeFile: this.core.removeFile,\n      info: this.core.info,\n      note: this.opts.note,\n      metaFields: state.metaFields,\n      resumableUploads: this.core.state.capabilities.resumableUploads || false,\n      startUpload: startUpload,\n      pauseUpload: this.core.pauseResume,\n      retryUpload: this.core.retryUpload,\n      cancelUpload: cancelUpload,\n      fileCardFor: pluginState.fileCardFor,\n      showFileCard: showFileCard,\n      fileCardDone: fileCardDone,\n      updateDashboardElWidth: this.updateDashboardElWidth,\n      maxWidth: this.opts.maxWidth,\n      maxHeight: this.opts.maxHeight,\n      currentWidth: pluginState.containerWidth,\n      isWide: pluginState.containerWidth > 400\n    })\n  }\n\n  discoverProviderPlugins () {\n    this.core.iteratePlugins((plugin) => {\n      if (plugin && !plugin.target && plugin.opts && plugin.opts.target === this.constructor) {\n        this.addTarget(plugin)\n      }\n    })\n  }\n\n  install () {\n    // Set default state for Modal\n    this.setPluginState({\n      isHidden: true,\n      showFileCard: false,\n      activePanel: false,\n      targets: []\n    })\n\n    const target = this.opts.target\n    if (target) {\n      this.mount(target, this)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.core.getPlugin(pluginID)\n      if (plugin) plugin.mount(this, plugin)\n    })\n\n    if (!this.opts.disableStatusBar) {\n      this.core.use(StatusBar, {\n        target: this,\n        hideUploadButton: this.opts.hideUploadButton\n      })\n    }\n\n    if (!this.opts.disableInformer) {\n      this.core.use(Informer, {\n        target: this\n      })\n    }\n\n    this.discoverProviderPlugins()\n\n    this.initEvents()\n    this.actions()\n  }\n\n  uninstall () {\n    if (!this.opts.disableInformer) {\n      const informer = this.core.getPlugin('Informer')\n      if (informer) this.core.removePlugin(informer)\n    }\n\n    if (!this.opts.disableStatusBar) {\n      const statusBar = this.core.getPlugin('StatusBar')\n      // Checking if this plugin exists, in case it was removed by uppy-core\n      // before the Dashboard was.\n      if (statusBar) this.core.removePlugin(statusBar)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.core.getPlugin(pluginID)\n      if (plugin) plugin.unmount()\n    })\n\n    this.unmount()\n    this.removeActions()\n    this.removeEvents()\n  }\n}\n"]}